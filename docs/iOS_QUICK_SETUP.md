# iOS Quick Setup Guide

## ‚úÖ Files Already Created

The following files have been created for you:

1. **`ios/Runner/SprucekitSsiApiImpl.swift`** - Implementation of SSI API
2. **`ios/Runner/AppDelegate.swift`** - Updated to use Pigeon API
3. **`ios/Runner/SsiApi.swift`** - Auto-generated by Pigeon
4. **`ios/Podfile`** - Updated with minimum iOS version 13.0

## üîß Required Steps in Xcode

### Step 1: Add Swift Files to Xcode Project

The Swift files need to be added to the Xcode project:

1. **Open Xcode workspace:**
   ```bash
   open ios/Runner.xcworkspace
   ```

2. **In Xcode, locate the Project Navigator** (left sidebar)

3. **Right-click on the `Runner` folder** (the yellow folder icon)

4. **Select "Add Files to Runner..."**

5. **Navigate to** `ios/Runner/` and select:
   - `SprucekitSsiApiImpl.swift`
   - `SsiApi.swift` (if not already added)

6. **Make sure these options are checked:**
   - ‚úÖ "Copy items if needed"
   - ‚úÖ "Create groups"
   - ‚úÖ Target membership: "Runner"

7. **Click "Add"**

### Step 2: Verify Swift Bridging

Since this is a Flutter project with Objective-C, ensure Swift bridging is configured:

1. In Xcode, select the **Runner project** (top of navigator)
2. Select the **Runner target**
3. Go to **Build Settings** tab
4. Search for "Swift Language Version"
5. Ensure it's set to **Swift 5.0** or later

### Step 3: Install CocoaPods Dependencies

```bash
cd ios
pod install
cd ..
```

### Step 4: (Optional) Add SpruceKit Mobile SDK

If you want to use real SpruceKit features (not just mocks):

1. In Xcode, select the **Runner project**
2. Select the **Runner target**
3. Go to **"General"** tab
4. Scroll to **"Frameworks, Libraries, and Embedded Content"**
5. Click the **"+"** button
6. Select **"Add Package Dependency..."**
7. Enter URL: `https://github.com/spruceid/sprucekit-mobile`
8. Select **Branch: main** (or a specific version)
9. Click **"Add Package"**
10. Select **"MobileSdk"** library
11. Click **"Add Package"**

**Note:** Current implementation works without SpruceKit SDK (uses mock data). You can add it later when ready to integrate real features.

## üöÄ Build and Run

### Option 1: From Terminal
```bash
flutter run -d ios
```

### Option 2: From Xcode
1. Select iPhone simulator or device
2. Click the **Run** button (‚ñ∂Ô∏è) or press **Cmd+R**

## ‚úÖ What Should Work

After setup, your iOS app should:

- ‚úÖ Launch successfully
- ‚úÖ Initialize SSI SDK
- ‚úÖ Create DIDs (mock implementation)
- ‚úÖ Manage credentials (mock implementation)
- ‚úÖ Persist data via Hive
- ‚úÖ Same features as Android

## üîç Troubleshooting

### Error: "No such module 'Runner'"

**Solution:** Clean and rebuild:
```bash
cd ios
rm -rf Pods Podfile.lock
pod install
cd ..
flutter clean
flutter pub get
flutter run -d ios
```

### Error: "Swift Compiler Error"

**Solution:** Ensure Swift files are added to the target:
1. Select the Swift file in Xcode
2. In the right sidebar, check **"Target Membership"**
3. Ensure **"Runner"** is checked

### Error: "Undefined symbol: _OBJC_CLASS_$_SsiApiSetup"

**Solution:** The pigeon-generated Swift code isn't being compiled. Make sure:
1. `SsiApi.swift` is in the Xcode project
2. It's included in the Runner target
3. Clean and rebuild

### Build is Slow

First-time builds can be slow. Subsequent builds will be faster.

## üìã Verification Checklist

- [ ] Opened `ios/Runner.xcworkspace` in Xcode
- [ ] Added `SprucekitSsiApiImpl.swift` to project
- [ ] Added `SsiApi.swift` to project (if needed)
- [ ] Verified Swift Language Version is 5.0+
- [ ] Ran `pod install` successfully
- [ ] Built project in Xcode successfully
- [ ] App launches on iOS simulator/device
- [ ] Can create DIDs
- [ ] Data persists after app restart

## üéØ Next Steps

Once iOS is working:

1. **Test both platforms** (Android & iOS) side by side
2. **Verify data persistence** (create DID, restart app, check it's still there)
3. **Test credential workflows**
4. **(Optional) Integrate real SpruceKit features** when ready
5. **Replace with Procivis SDK** when you receive it

## üìö Additional Resources

- **Pigeon Documentation:** https://pub.dev/packages/pigeon
- **SpruceKit Mobile:** https://github.com/spruceid/sprucekit-mobile
- **Flutter iOS Setup:** https://docs.flutter.dev/get-started/install/macos#ios-setup

## ‚ö° Quick Test

After setup, try this in your app:

1. Navigate to DID Management
2. Click "Create DID"
3. Select `did:key` method
4. Confirm creation
5. **Kill and restart the app**
6. Check if the DID still exists (Hive persistence working!)

---

**Need help?** Check the main summary at `docs/SPRUCEKIT_INTEGRATION_SUMMARY.md`
